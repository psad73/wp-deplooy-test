!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ZBVideo=t():e.ZBVideo=t()}(window,(function(){return function(e){var t={};function i(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="dist/",i(i.s=1)}([,function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return l}));class o{constructor(){this.callbacks={}}addEventListener(e,t){void 0===this.callbacks[e]&&(this.callbacks[e]=[]),this.callbacks[e].push(t)}removeEventListener(e,t){if(void 0!==this.callbacks[e]){const i=this.callbacks[e].indexOf(t);-1!==i&&this.callbacks[e].splice(i)}}dispatchEvent(e,t={}){void 0!==this.callbacks[e]&&this.callbacks[e].forEach(e=>{e({detail:t})})}}var s=function(e,t){var i="string"==typeof e?document.querySelectorAll(e):e,o=t||"js-reframe";"length"in i||(i=[i]);for(var s=0;s<i.length;s+=1){var n=i[s];if(!(-1!==n.className.split(" ").indexOf(o)||n.style.width.indexOf("%")>-1)){var r=(n.getAttribute("height")||n.offsetHeight)/(n.getAttribute("width")||n.offsetWidth)*100,a=document.createElement("div");a.className=o;var u=a.style;u.position="relative",u.width="100%",u.paddingTop=r+"%";var d=n.style;d.position="absolute",d.width="100%",d.height="100%",d.left="0",d.top="0",n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n),a.appendChild(n)}}};let n=0,r=0,a=0,u=1;const d=new o;class l{constructor(e,t={}){this.options={autoplay:!0,muted:!0,loop:!0,controls:!0,controlsPosition:"bottom-left",videoSource:"local",responsive:!0,...t},this.eventBusInstance=new o,this.on=this.eventBusInstance.addEventListener.bind(this.eventBusInstance),this.off=this.eventBusInstance.removeEventListener.bind(this.eventBusInstance),this.trigger=this.eventBusInstance.dispatchEvent.bind(this.eventBusInstance),this.domNode=e,this.videoIndex=a++,this.videoContainer=null,this.options.responsive&&this.on("video_ready",()=>{s(this.videoContainer)}),this.domNode.zionVideo=this,this.nextTick(()=>{"local"===this.options.videoSource&&this.options.mp4?(this.videoSource="local",this.setupLocal()):"youtube"===this.options.videoSource&&this.options.youtubeURL?(this.videoSource="youtube",this.YoutubeId=function(e){let t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!t||11!==t[7].length)&&t[7]}(this.options.youtubeURL),this.setupYoutube()):"vimeo"===this.options.videoSource&&this.options.vimeoURL&&(this.videoSource="vimeo",this.setupVimeo())})}nextTick(e){setTimeout(()=>{e()},0)}setupYoutube(){const e={mute:this.options.muted?1:0,autoplay:this.options.autoplay?1:0,iv_load_policy:3,showinfo:0,controls:this.options.controls?1:0,modestbranding:1,rel:0,wmode:"transparent"};let t="";for(let[i,o]of Object.entries(e))t+=`&${i}=${o}`;const i=document.createElement("iframe");if(i.src=`https://www.youtube-nocookie.com/embed/${this.YoutubeId}?enablejsapi=1${t}`,i.id="znpb-video-bg-youtube-"+this.videoIndex,i.allow="autoplay; fullscreen",i.width=425,i.height=239,this.domNode.appendChild(i),0===n){var o=document.createElement("script");o.src="https://www.youtube.com/iframe_api";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(o,s);const e=this;window.onYouTubeIframeAPIReady=function(){e.enableYoutube(),d.dispatchEvent("youtube_api_ready"),n=2},n=1}else 1===n?d.addEventListener("youtube_api_ready",this.enableYoutube.bind(this)):2===n&&this.enableYoutube()}enableYoutube(){this.player=new window.YT.Player("znpb-video-bg-youtube-"+this.videoIndex,{height:"100%",width:"100%",videoId:this.YoutubeId}),this.videoContainer=this.player.getIframe(),this.trigger("video_ready")}setupVimeo(){const e=document.createElement("div");if(e.id="znpb-video-bg-vimeo-"+this.videoIndex,this.domNode.appendChild(e),0===r){const e=document.createElement("script");e.src="https://player.vimeo.com/api/player.js";let t=document.getElementsByTagName("script")[1];const i=this;t.parentNode.insertBefore(e,t),e.onload=function(){i.enableVimeo(),d.dispatchEvent("vimeo_api_ready"),r=2},r=1}else 1===r?d.addEventListener("vimeo_api_ready",this.enableVimeo.bind(this)):2===r&&this.enableVimeo()}enableVimeo(){this.player=new window.Vimeo.Player("znpb-video-bg-vimeo-"+this.videoIndex,{id:this.options.vimeoURL,background:!0,muted:this.options.muted,transparent:!0,autoplay:this.options.autoplay}),this.player.ready().then(()=>{this.videoContainer=this.player.element,this.trigger("video_ready")})}setupLocal(){let e=this.options.autoplay?"autoplay":"",t=this.options.muted?"muted":"",i=this.options.loop?"loop":"",o=document.createElement("video");if(o.muted=t,o.autoplay=e,o.loop=i,this.options.controls&&(o.controls=!0),this.options.mp4){var s=document.createElement("source");s.src=this.options.mp4,o.appendChild(s)}this.domNode.appendChild(o),this.player=o,this.videoContainer=o,this.trigger("video_ready")}getVideoContainer(){return this.videoContainer}play(){"youtube"===this.videoSource&&this.player.playVideo(),"vimeo"===this.videoSource&&this.player.play(),"local"===this.videoSource&&this.player.play(),this.playing=!0}pause(){"youtube"===this.videoSource&&this.player.pauseVideo(),"vimeo"===this.videoSource&&this.player.pause(),"local"===this.videoSource&&this.player.pause(),this.playing=!1}togglePlay(){this.playing?this.pause():this.play()}mute(){"youtube"===this.videoSource&&this.player.mute(),"vimeo"===this.videoSource&&(this.player.getVolume().then(e=>{u=e}),this.player.setVolume(0)),"local"===this.videoSource&&(this.player.muted=!0),this.muted=!0}unMute(){"youtube"===this.videoSource&&this.player.unMute(),"vimeo"===this.videoSource&&this.player.setVolume(u),"local"===this.videoSource&&(this.player.muted=!1),this.muted=!1}toggleMute(){this.muted?this.unMute():this.mute()}destroy(){for(this.trigger("beforeDestroy"),this.player=null;this.domNode.firstChild;)this.domNode.removeChild(this.domNode.firstChild)}}}]).default}));